<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Will You Be My Valentine?</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Playfair Display', 'Georgia', serif;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            background: radial-gradient(ellipse at bottom, #1b2735 0%, #090a0f 100%);
        }

        /* ===== TWINKLING STARS ===== */
        .stars-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle var(--duration) ease-in-out infinite;
            animation-delay: var(--delay);
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.2; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.5); box-shadow: 0 0 10px 2px rgba(255, 255, 255, 0.6); }
        }

        .shooting-star {
            position: absolute;
            width: 4px;
            height: 4px;
            background: white;
            border-radius: 50%;
            box-shadow: 0 0 6px 2px rgba(255, 255, 255, 0.5);
            animation: shoot 3s ease-in-out infinite;
            opacity: 0;
        }

        @keyframes shoot {
            0% { transform: translateX(0) translateY(0); opacity: 0; }
            5% { opacity: 1; }
            20% { transform: translateX(300px) translateY(200px); opacity: 0; }
            100% { opacity: 0; }
        }

        /* ===== FLOATING BACKGROUND ELEMENTS ===== */
        .bg-hearts {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
            z-index: 1;
        }

        .bg-heart {
            position: absolute;
            animation: floatUp var(--speed) linear infinite;
            animation-delay: var(--delay);
            opacity: 0;
            filter: blur(0.5px);
        }

        @keyframes floatUp {
            0% { transform: translateY(100vh) translateX(0) rotate(0deg) scale(0.5); opacity: 0; }
            10% { opacity: 0.5; }
            50% { transform: translateY(50vh) translateX(30px) rotate(180deg) scale(1); }
            90% { opacity: 0.5; }
            100% { transform: translateY(-100px) translateX(-20px) rotate(360deg) scale(0.5); opacity: 0; }
        }

        /* ===== QUESTION SCREEN ===== */
        .question-screen {
            text-align: center;
            z-index: 10;
            padding: 20px;
            position: relative;
        }

        .question-screen h1 {
            font-family: 'Dancing Script', cursive;
            font-size: clamp(2.5rem, 10vw, 5rem);
            font-weight: 700;
            color: #fff;
            text-shadow:
                0 0 20px rgba(255, 182, 193, 0.8),
                0 0 40px rgba(255, 105, 135, 0.5),
                0 0 80px rgba(255, 105, 135, 0.3),
                3px 3px 6px rgba(0, 0, 0, 0.4);
            margin-bottom: 20px;
            animation: glowPulse 3s ease-in-out infinite;
        }

        @keyframes glowPulse {
            0%, 100% {
                text-shadow:
                    0 0 20px rgba(255, 182, 193, 0.8),
                    0 0 40px rgba(255, 105, 135, 0.5),
                    0 0 80px rgba(255, 105, 135, 0.3),
                    3px 3px 6px rgba(0, 0, 0, 0.4);
            }
            50% {
                text-shadow:
                    0 0 30px rgba(255, 215, 0, 0.9),
                    0 0 60px rgba(255, 182, 193, 0.6),
                    0 0 100px rgba(255, 105, 135, 0.4),
                    3px 3px 6px rgba(0, 0, 0, 0.4);
            }
        }

        .decorative-divider {
            font-size: 1.5rem;
            margin-bottom: 40px;
            opacity: 0.8;
            letter-spacing: 8px;
            animation: fadeInSlow 2s ease-out;
        }

        @keyframes fadeInSlow {
            0% { opacity: 0; transform: translateY(10px); }
            100% { opacity: 0.8; transform: translateY(0); }
        }

        .buttons {
            display: flex;
            gap: 30px;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 20px 40px;
            font-size: 24px;
            font-family: 'Playfair Display', 'Georgia', serif;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            position: relative;
        }

        .btn-yes {
            background: linear-gradient(135deg, #f5af19 0%, #f12711 30%, #f5af19 60%, #ffd700 100%);
            background-size: 200% 200%;
            animation: shimmerGold 3s ease-in-out infinite;
            color: white;
            transform: scale(1);
            box-shadow: 0 8px 25px rgba(245, 175, 25, 0.5), 0 0 30px rgba(255, 215, 0, 0.3);
        }

        @keyframes shimmerGold {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .btn-yes:hover {
            transform: scale(1.1);
            box-shadow: 0 12px 40px rgba(245, 175, 25, 0.7), 0 0 50px rgba(255, 215, 0, 0.5);
        }

        .btn-no {
            background: linear-gradient(135deg, #8b0000 0%, #dc143c 50%, #8b0000 100%);
            color: white;
            transform: scale(1);
            box-shadow: 0 8px 25px rgba(139, 0, 0, 0.5);
            animation: pulseGlow 2s ease-in-out infinite;
        }

        @keyframes pulseGlow {
            0%, 100% { box-shadow: 0 8px 25px rgba(139, 0, 0, 0.5); }
            50% { box-shadow: 0 8px 25px rgba(220, 20, 60, 0.8), 0 0 20px rgba(220, 20, 60, 0.3); }
        }

        .btn-no:hover { box-shadow: 0 12px 35px rgba(220, 20, 60, 0.8); }

        .btn-no.running {
            position: fixed;
            transition: left 0.1s ease-out, top 0.1s ease-out;
        }

        /* ===== CELEBRATION SCREEN ===== */
        .celebration-screen {
            display: none;
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: linear-gradient(135deg, #1a0a2e, #2d1b69, #44107a, #67318e);
            background-size: 400% 400%;
            animation: gradientShift 10s ease infinite;
            z-index: 100;
            justify-content: flex-start;
            align-items: center;
            flex-direction: column;
            text-align: center;
            padding: 30px 20px;
            overflow-y: auto;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            25% { background-position: 100% 0%; }
            50% { background-position: 50% 100%; }
            75% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .celebration-screen.active { display: flex; }

        /* White flash overlay */
        .flash-overlay {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: white;
            z-index: 200;
            animation: flashBang 0.8s ease-out forwards;
            pointer-events: none;
        }

        @keyframes flashBang {
            0% { opacity: 1; }
            100% { opacity: 0; }
        }

        /* Stage 1: Photo with glowing frame */
        .photo-frame {
            position: relative;
            padding: 6px;
            border-radius: 24px;
            background: linear-gradient(135deg, #ffd700, #ff69b4, #ffd700, #ff1493, #ffd700);
            background-size: 300% 300%;
            animation: dropIn 1s cubic-bezier(0.34, 1.56, 0.64, 1) 0.5s both,
                       borderShimmer 3s linear infinite;
            box-shadow:
                0 0 30px rgba(255, 215, 0, 0.4),
                0 0 60px rgba(255, 105, 180, 0.2),
                0 20px 60px rgba(0, 0, 0, 0.4);
            margin-bottom: 25px;
        }

        @keyframes borderShimmer {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .photo-frame::after {
            content: '';
            position: absolute;
            top: -4px; left: -4px; right: -4px; bottom: -4px;
            border-radius: 28px;
            background: inherit;
            background-size: inherit;
            animation: inherit;
            filter: blur(15px);
            opacity: 0.6;
            z-index: -1;
        }

        .dog-image {
            display: block;
            max-width: 280px;
            max-height: 280px;
            border-radius: 20px;
            object-fit: cover;
        }

        @keyframes dropIn {
            0% { opacity: 0; transform: translateY(-80vh) scale(0.3) rotate(-10deg); }
            60% { opacity: 1; transform: translateY(20px) scale(1.05) rotate(2deg); }
            80% { transform: translateY(-10px) scale(0.98) rotate(-1deg); }
            100% { opacity: 1; transform: translateY(0) scale(1) rotate(0deg); }
        }

        /* Gentle float after drop-in */
        .photo-frame.settled {
            animation: gentleFloat 4s ease-in-out infinite, borderShimmer 3s linear infinite;
        }

        @keyframes gentleFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-12px); }
        }

        /* Stage 2: Text entries */
        .lets-go-text {
            font-family: 'Dancing Script', cursive;
            font-size: clamp(2.5rem, 10vw, 4.5rem);
            font-weight: 700;
            color: white;
            letter-spacing: 4px;
            text-shadow:
                4px 4px 8px rgba(0, 0, 0, 0.5),
                0 0 40px rgba(255, 215, 0, 0.5),
                0 0 80px rgba(255, 105, 180, 0.3);
            margin-bottom: 15px;
            animation: slideInLeft 0.7s cubic-bezier(0.25, 0.46, 0.45, 0.94) 1.8s both,
                       rainbow 2.5s linear 2.5s infinite;
        }

        @keyframes slideInLeft {
            0% { opacity: 0; transform: translateX(-100vw) rotate(-5deg); }
            70% { transform: translateX(20px) rotate(1deg); }
            100% { opacity: 1; transform: translateX(0) rotate(0); }
        }

        @keyframes rainbow {
            0% { color: #ff6b6b; }
            20% { color: #ffd93d; }
            40% { color: #6bcb77; }
            60% { color: #4d96ff; }
            80% { color: #ff69b4; }
            100% { color: #ff6b6b; }
        }

        .big-chungus-text {
            font-family: 'Playfair Display', serif;
            font-size: clamp(2rem, 9vw, 4rem);
            font-weight: 700;
            color: #ffd700;
            letter-spacing: 3px;
            text-shadow:
                3px 3px 0 #ff69b4,
                6px 6px 0 rgba(0, 0, 0, 0.3),
                0 0 30px rgba(255, 215, 0, 0.6);
            margin-bottom: 30px;
            animation: smashIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) 2.5s both;
        }

        .big-chungus-text.settled {
            animation: megaBounce 2s ease-in-out infinite;
        }

        @keyframes smashIn {
            0% { opacity: 0; transform: scale(4) rotate(10deg); filter: blur(10px); }
            50% { opacity: 1; transform: scale(0.85) rotate(-3deg); filter: blur(0); }
            70% { transform: scale(1.1) rotate(1deg); }
            100% { opacity: 1; transform: scale(1) rotate(0); }
        }

        @keyframes megaBounce {
            0%, 100% { transform: scale(1) rotate(-1deg); }
            25% { transform: scale(1.05) rotate(1deg); }
            50% { transform: scale(1) rotate(-1deg); }
            75% { transform: scale(1.03) rotate(0.5deg); }
        }

        /* Stage 3: Love message card */
        .love-card-wrapper {
            animation: riseIn 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94) 3.5s both;
            margin-bottom: 40px;
            width: 100%;
            max-width: 620px;
        }

        @keyframes riseIn {
            0% { opacity: 0; transform: translateY(60px) scale(0.95); }
            100% { opacity: 1; transform: translateY(0) scale(1); }
        }

        .love-card {
            position: relative;
            padding: 35px 30px 25px;
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 24px;
            border: 1px solid rgba(255, 255, 255, 0.15);
            box-shadow:
                0 8px 32px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1),
                0 0 40px rgba(255, 105, 180, 0.08);
        }

        /* Gradient border glow behind the card */
        .love-card::before {
            content: '';
            position: absolute;
            top: -2px; left: -2px; right: -2px; bottom: -2px;
            border-radius: 26px;
            background: linear-gradient(135deg, #ffd700, #ff69b4, #c44dff, #ffd700);
            background-size: 300% 300%;
            animation: borderShimmer 4s linear infinite;
            z-index: -1;
            opacity: 0.4;
            filter: blur(3px);
        }

        .love-card-quote {
            font-size: 3rem;
            line-height: 1;
            color: rgba(255, 215, 0, 0.3);
            font-family: 'Dancing Script', cursive;
            margin-bottom: -10px;
        }

        .love-card p {
            font-family: 'Playfair Display', 'Georgia', serif;
            font-size: clamp(0.95rem, 2.5vw, 1.2rem);
            color: rgba(255, 255, 255, 0.92);
            line-height: 1.9;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
        }

        .love-card-divider {
            width: 60px;
            height: 2px;
            background: linear-gradient(90deg, transparent, #ffd700, #ff69b4, #ffd700, transparent);
            margin: 20px auto;
            border-radius: 2px;
        }

        .love-card-footer {
            font-family: 'Dancing Script', cursive;
            font-size: 1.2rem;
            color: rgba(255, 215, 0, 0.7);
            letter-spacing: 2px;
        }

        /* ===== FIREWORKS CANVAS ===== */
        #fireworks {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 99;
            display: none;
        }

        #fireworks.active { display: block; }

        /* ===== CELEBRATION HEARTS ===== */
        .celebration-hearts {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 102;
            overflow: hidden;
        }

        .celebration-heart {
            position: absolute;
            font-size: 30px;
            animation: celebrateFloat 4s ease-in-out infinite;
        }

        @keyframes celebrateFloat {
            0% { transform: translateY(100vh) scale(0) rotate(0deg); opacity: 0; }
            20% { opacity: 1; transform: translateY(80vh) scale(1) rotate(45deg); }
            100% { transform: translateY(-100px) scale(1.5) rotate(360deg); opacity: 0; }
        }

        /* ===== FLOATING DUCKS ===== */
        .floating-ducks {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 103;
            overflow: hidden;
        }

        .duck {
            position: absolute;
            animation: duckSwim var(--swim-speed) linear infinite;
            animation-delay: var(--delay);
        }

        @keyframes duckSwim {
            0% { transform: translateX(-80px) translateY(0); opacity: 0; }
            5% { opacity: 1; }
            25% { transform: translateX(25vw) translateY(-20px); }
            50% { transform: translateX(50vw) translateY(15px); }
            75% { transform: translateX(75vw) translateY(-10px); }
            95% { opacity: 1; }
            100% { transform: translateX(105vw) translateY(5px); opacity: 0; }
        }

        .duck.reverse { animation-name: duckSwimReverse; }

        @keyframes duckSwimReverse {
            0% { transform: translateX(105vw) translateY(0) scaleX(-1); opacity: 0; }
            5% { opacity: 1; }
            25% { transform: translateX(75vw) translateY(-15px) scaleX(-1); }
            50% { transform: translateX(50vw) translateY(20px) scaleX(-1); }
            75% { transform: translateX(25vw) translateY(-10px) scaleX(-1); }
            95% { opacity: 1; }
            100% { transform: translateX(-80px) translateY(5px) scaleX(-1); opacity: 0; }
        }

        /* ===== SPARKLES ===== */
        .sparkle {
            position: absolute;
            pointer-events: none;
            animation: sparkleAnim 1.5s ease-out forwards;
            font-size: 16px;
        }

        @keyframes sparkleAnim {
            0% { opacity: 1; transform: scale(0) rotate(0deg); }
            50% { opacity: 1; transform: scale(1.2) rotate(180deg); }
            100% { opacity: 0; transform: scale(0) rotate(360deg); }
        }

        .hidden { display: none !important; }
    </style>
</head>
<body>
    <!-- Twinkling Stars -->
    <div class="stars-container" id="starsContainer"></div>

    <!-- Background Hearts -->
    <div class="bg-hearts" id="bgHearts"></div>

    <!-- Question Screen -->
    <div class="question-screen" id="questionScreen">
        <h1>Will you be my Valentine? üíï</h1>
        <div class="decorative-divider">üåπ ‚ú® üåπ ‚ú® üåπ</div>
        <div class="buttons">
            <button class="btn btn-yes" id="yesBtn">Yes!</button>
            <button class="btn btn-no" id="noBtn">No</button>
        </div>
    </div>

    <!-- Celebration Screen -->
    <div class="celebration-screen" id="celebrationScreen">
        <!-- Stage 1: Photo -->
        <div class="photo-frame" id="photoFrame">
            <img src="Lincoln with Glasses.png" alt="Our adorable dog!" class="dog-image" id="dogImage">
        </div>

        <!-- Stage 2: Hype text -->
        <div class="lets-go-text" id="letsGoText">LET'S GOOO üéâ</div>
        <div class="big-chungus-text" id="bigChungusText">LOOK IT'S BIG CHUNGUS!</div>

        <!-- Stage 3: Love letter -->
        <div class="love-card-wrapper" id="loveCardWrapper">
            <div class="love-card">
                <div class="love-card-quote">"</div>
                <p>
                    I love you so much. You're my whole entire world and you're the best dog mom in the world! You go through so much in your life yet you still are able to keep moving forward, and that makes you one of the strongest and most resilient people I know. You have made me a better man, person, friend, son. I owe so much of my life to you, and I wouldn't have asked for a better woman in my life. Thank you and I love you! I'm so glad you will be my valentine this year!
                </p>
                <div class="love-card-divider"></div>
                <div class="love-card-footer">‚ù§Ô∏è With all my love ‚ù§Ô∏è</div>
            </div>
        </div>
    </div>

    <!-- Fireworks Canvas -->
    <canvas id="fireworks"></canvas>

    <!-- Celebration Hearts Container -->
    <div class="celebration-hearts" id="celebrationHearts"></div>

    <!-- Floating Ducks Container -->
    <div class="floating-ducks" id="floatingDucks"></div>

    <script>
        // ===== ELEMENTS =====
        const yesBtn = document.getElementById('yesBtn');
        const noBtn = document.getElementById('noBtn');
        const questionScreen = document.getElementById('questionScreen');
        const celebrationScreen = document.getElementById('celebrationScreen');
        const bgHearts = document.getElementById('bgHearts');
        const celebrationHearts = document.getElementById('celebrationHearts');
        const floatingDucks = document.getElementById('floatingDucks');
        const starsContainer = document.getElementById('starsContainer');
        const fireworksCanvas = document.getElementById('fireworks');
        const ctx = fireworksCanvas.getContext('2d');
        const photoFrame = document.getElementById('photoFrame');
        const bigChungusText = document.getElementById('bigChungusText');

        // ===== CREATE TWINKLING STARS =====
        function createStars() {
            for (let i = 0; i < 150; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                const size = Math.random() * 3 + 1;
                star.style.width = size + 'px';
                star.style.height = size + 'px';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.setProperty('--duration', (2 + Math.random() * 4) + 's');
                star.style.setProperty('--delay', (Math.random() * 5) + 's');
                starsContainer.appendChild(star);
            }
            for (let i = 0; i < 3; i++) {
                const shootingStar = document.createElement('div');
                shootingStar.className = 'shooting-star';
                shootingStar.style.top = (10 + Math.random() * 40) + '%';
                shootingStar.style.left = (Math.random() * 60) + '%';
                shootingStar.style.animationDelay = (i * 4 + Math.random() * 3) + 's';
                shootingStar.style.animationDuration = (2 + Math.random() * 2) + 's';
                starsContainer.appendChild(shootingStar);
            }
        }
        createStars();

        // ===== CREATE BACKGROUND HEARTS =====
        function createBgHearts() {
            const emojis = ['‚ù§Ô∏è', 'üíï', '‚ú®', 'üåπ', 'üíñ', 'üåü'];
            for (let i = 0; i < 20; i++) {
                const heart = document.createElement('div');
                heart.className = 'bg-heart';
                heart.innerHTML = emojis[Math.floor(Math.random() * emojis.length)];
                heart.style.left = Math.random() * 100 + '%';
                heart.style.setProperty('--delay', (Math.random() * 10) + 's');
                heart.style.setProperty('--speed', (6 + Math.random() * 6) + 's');
                heart.style.fontSize = (14 + Math.random() * 22) + 'px';
                bgHearts.appendChild(heart);
            }
        }
        createBgHearts();

        // ===== NO BUTTON LOGIC =====
        const noTexts = [
            "No",
            "Are you sure?",
            "Please? ü•∫",
            "Come on honey",
            "Don't be like this",
            "Enough!"
        ];
        const runAwayIndex = 4;

        let noClickCount = 0;
        let yesScale = 1;
        let noScale = 1;
        let isRunning = false;
        let mouseX = 0;
        let mouseY = 0;

        noBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            if (noClickCount < noTexts.length - 1) {
                noClickCount++;
                noBtn.textContent = noTexts[noClickCount];
                noScale *= 0.9;
                noBtn.style.transform = `scale(${noScale})`;
                noBtn.style.padding = `${20 * noScale}px ${40 * noScale}px`;
                noBtn.style.fontSize = `${24 * noScale}px`;
                yesScale *= 1.15;
                yesBtn.style.transform = `scale(${yesScale})`;
            }
            if (noClickCount >= runAwayIndex && !isRunning) {
                isRunning = true;
                noBtn.classList.add('running');
                noBtn.style.left = noBtn.getBoundingClientRect().left + 'px';
                noBtn.style.top = noBtn.getBoundingClientRect().top + 'px';
            }
        });

        // ===== MOUSE TRACKING =====
        document.addEventListener('mousemove', function(e) {
            mouseX = e.clientX;
            mouseY = e.clientY;
            if (isRunning) runAway();
        });

        document.addEventListener('touchmove', function(e) {
            if (e.touches.length > 0) {
                mouseX = e.touches[0].clientX;
                mouseY = e.touches[0].clientY;
                if (isRunning) runAway();
            }
        });

        function runAway() {
            const btnRect = noBtn.getBoundingClientRect();
            const btnCenterX = btnRect.left + btnRect.width / 2;
            const btnCenterY = btnRect.top + btnRect.height / 2;
            const dx = btnCenterX - mouseX;
            const dy = btnCenterY - mouseY;
            const distance = Math.sqrt(dx * dx + dy * dy);
            if (distance < 200) {
                const angle = Math.atan2(dy, dx);
                let newX = btnRect.left + Math.cos(angle) * 100;
                let newY = btnRect.top + Math.sin(angle) * 100;
                const maxX = window.innerWidth - btnRect.width - 10;
                const maxY = window.innerHeight - btnRect.height - 10;
                newX = Math.max(10, Math.min(maxX, newX));
                newY = Math.max(10, Math.min(maxY, newY));
                noBtn.style.left = newX + 'px';
                noBtn.style.top = newY + 'px';
            }
        }

        // ===== YES BUTTON ‚Äî CINEMATIC REVEAL =====
        yesBtn.addEventListener('click', function() {
            questionScreen.classList.add('hidden');

            // White flash
            const flash = document.createElement('div');
            flash.className = 'flash-overlay';
            document.body.appendChild(flash);
            setTimeout(() => flash.remove(), 1000);

            celebrationScreen.classList.add('active');

            // After photo drop-in completes, switch to gentle float
            setTimeout(() => {
                photoFrame.classList.add('settled');
            }, 2000);

            // After big chungus smashes in, switch to gentle bounce
            setTimeout(() => {
                bigChungusText.classList.add('settled');
            }, 3500);

            resizeCanvas();
            startFireworks();
            startCelebrationHearts();
            startFloatingDucks();
            startSparkles();
        });

        // ===== FIREWORKS =====
        fireworksCanvas.width = window.innerWidth;
        fireworksCanvas.height = window.innerHeight;

        function resizeCanvas() {
            fireworksCanvas.width = window.innerWidth;
            fireworksCanvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resizeCanvas);

        let particles = [];
        let fireworksActive = false;

        class Particle {
            constructor(x, y, color) {
                this.x = x;
                this.y = y;
                this.color = color;
                this.velocity = {
                    x: (Math.random() - 0.5) * 12,
                    y: (Math.random() - 0.5) * 12
                };
                this.alpha = 1;
                this.decay = 0.012 + Math.random() * 0.008;
                this.size = 3 + Math.random() * 4;
                this.trail = [];
            }

            update() {
                this.trail.push({ x: this.x, y: this.y, alpha: this.alpha });
                if (this.trail.length > 5) this.trail.shift();
                this.velocity.y += 0.08;
                this.x += this.velocity.x;
                this.y += this.velocity.y;
                this.alpha -= this.decay;
            }

            draw() {
                this.trail.forEach((point, i) => {
                    ctx.save();
                    ctx.globalAlpha = point.alpha * (i / this.trail.length) * 0.5;
                    ctx.fillStyle = this.color;
                    ctx.beginPath();
                    ctx.arc(point.x, point.y, this.size * 0.5, 0, Math.PI * 2);
                    ctx.fill();
                    ctx.restore();
                });
                ctx.save();
                ctx.globalAlpha = this.alpha;
                ctx.fillStyle = this.color;
                ctx.shadowBlur = 8;
                ctx.shadowColor = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
                ctx.restore();
            }
        }

        function createFirework() {
            const x = Math.random() * fireworksCanvas.width;
            const y = Math.random() * (fireworksCanvas.height * 0.5);
            const colors = [
                '#ff6b6b', '#ffd93d', '#6bcb77', '#4d96ff',
                '#ff85a2', '#a855f7', '#f97316', '#ffd700',
                '#ff1493', '#00ffff', '#ff69b4', '#ffa500'
            ];
            const color = colors[Math.floor(Math.random() * colors.length)];
            const count = 40 + Math.floor(Math.random() * 30);
            for (let i = 0; i < count; i++) {
                particles.push(new Particle(x, y, color));
            }
        }

        function animateFireworks() {
            if (!fireworksActive) return;
            ctx.clearRect(0, 0, fireworksCanvas.width, fireworksCanvas.height);
            particles = particles.filter(p => p.alpha > 0);
            particles.forEach(p => { p.update(); p.draw(); });
            requestAnimationFrame(animateFireworks);
        }

        function startFireworks() {
            fireworksActive = true;
            fireworksCanvas.classList.add('active');
            ctx.clearRect(0, 0, fireworksCanvas.width, fireworksCanvas.height);
            for (let i = 0; i < 6; i++) {
                setTimeout(() => createFirework(), i * 150);
            }
            setInterval(() => { if (fireworksActive) createFirework(); }, 400);
            animateFireworks();
        }

        // ===== CELEBRATION HEARTS =====
        function startCelebrationHearts() {
            setInterval(() => {
                const heart = document.createElement('div');
                heart.className = 'celebration-heart';
                heart.innerHTML = ['‚ù§Ô∏è', 'üíï', 'üíñ', 'üíó', 'üíì', 'üíù', 'üíò'][Math.floor(Math.random() * 7)];
                heart.style.left = Math.random() * 100 + '%';
                heart.style.fontSize = (20 + Math.random() * 30) + 'px';
                heart.style.animationDuration = (3 + Math.random() * 3) + 's';
                celebrationHearts.appendChild(heart);
                setTimeout(() => heart.remove(), 6000);
            }, 250);
        }

        // ===== FLOATING DUCKS =====
        function startFloatingDucks() {
            function spawnDuck() {
                const duck = document.createElement('div');
                duck.className = 'duck' + (Math.random() > 0.5 ? ' reverse' : '');
                duck.innerHTML = 'ü¶Ü';
                duck.style.top = (15 + Math.random() * 70) + '%';
                duck.style.fontSize = (25 + Math.random() * 30) + 'px';
                duck.style.setProperty('--swim-speed', (6 + Math.random() * 6) + 's');
                duck.style.setProperty('--delay', '0s');
                floatingDucks.appendChild(duck);
                setTimeout(() => duck.remove(), 14000);
            }
            for (let i = 0; i < 3; i++) {
                setTimeout(() => spawnDuck(), i * 800);
            }
            setInterval(() => spawnDuck(), 2000);
        }

        // ===== SPARKLES =====
        function startSparkles() {
            setInterval(() => {
                const sparkle = document.createElement('div');
                sparkle.className = 'sparkle';
                sparkle.innerHTML = ['‚ú®', '‚≠ê', 'üí´'][Math.floor(Math.random() * 3)];
                sparkle.style.left = Math.random() * 100 + '%';
                sparkle.style.top = Math.random() * 100 + '%';
                sparkle.style.position = 'fixed';
                sparkle.style.zIndex = '104';
                sparkle.style.pointerEvents = 'none';
                sparkle.style.fontSize = (12 + Math.random() * 20) + 'px';
                document.body.appendChild(sparkle);
                setTimeout(() => sparkle.remove(), 1500);
            }, 150);
        }
    </script>
</body>
</html>
